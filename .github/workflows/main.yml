name: Security Checks


on:
push:
branches: ["main"]
pull_request:
branches: ["main"]


jobs:
security-test:
runs-on: ubuntu-latest


steps:
- name: Checkout code
uses: actions/checkout@v4


- name: Run PHP Lint
run: |
find . -name "*.php" -exec php -l {} \;


- name: Run basic security scan
uses: snyk/actions/php@master
env:
SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}


- name: Check for secrets in repo
uses: trufflesecurity/trufflehog@main
